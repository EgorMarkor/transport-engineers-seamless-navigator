# Командна _"Future код"_

## Инженеры транспорта

В этом репозитории представлен весь исходный код команды "_Future код_",
принимающей участие в треке "Бесшовный навигатор".

---

## Основные принципы работы проекта

Для обеспечения _indoor_-навигации используется подход с применением _BLE_-маячков.

#### Проект состоит из __4__ основных компонентов:

- _Мобильное_ приложение;
- _BLE_-маячки для обеспечения _indoor_-навигации;
- [_http_-сервер](http://194.87.111.159/api/) для хранения оцифрованных карт помещений;
- [_Веб_-интерфейс](http://194.87.111.159/) для создания оцифрованных карт помещений.

#### Сценарий работы _нашего бесшовного навигатора_:

1. Любой пользователь (например _администрация вокзала, супермаркета, метро, просто человек,
   желающий протестировать технологию и т.д._) размещает на территории нужного ему помещения
   _BLE_-маячки, минимум по _три_ в каждую комнату.

2. Далее пользователь регистрируется в [_веб-интерфейсе_](http://194.87.111.159/)
   и создает карту нужного ему помещения, указывая _BLE-ID_ всех маячков из пункта ___1___

3. Затем пользователь скачивает _наше_ приложение на свое _Android_ или _iOS_ устройство

4. Можно _пользоваться_!

#### Важные нюансы:

- _Каким образом происходит вычисление координат пользователя?_

  Для вычисления координат используется алгоритм [_трилатерации_](https://ru.wikipedia.org/wiki/Трилатерация)
  с применением [_фильтра Калмана_](https://ru.wikipedia.org/wiki/Фильтр_Калмана)
  для улучшения точности позиционирования.


- _Откуда мобильное приложение берет карту помещения?_

  Мобильное приложение берет _ID_ близжайшего маячка и делает запрос на наш сервер по
  URL `http://194.87.111.159/api/map/<id маячка>`. Для этого и нужно указывать _ID_ всех _маячков_
  в [_веб-интерфейсе_](http://194.87.111.159/).

---

### Код разбит по веткам:

#### В `README.md` каждой ветки нахоидится инструкция для сборки соответствующей части проекта

- ### main

На данный момент пустая, за исключением `github workflow` для
автоматического развертывания `backend`'а на наш сервер.

---

- ### mobile

Здесь находится исходный код мобильного приложения, созданного с
помощью фреймворка `flutter`.

---

- ### backend

Здесь находится исходный код __http__-сервера, который исользуется для
хранения созданных карт помещений. С целью достижения максимальной производительности сервер написан
на [![Go](https://img.shields.io/badge/Go-00ADD8?style=flat&logo=go&logoColor=white)](https://golang.org) и
использует следующий стек:

- `gin` как основной фреймворк для создания http-сервера
- [![MongoDB](https://img.shields.io/badge/MongoDB-47A248?style=flat&logo=mongodb&logoColor=white)](https://www.mongodb.com)
  для хранения карт в __[GeoJSON](https://datatracker.ietf.org/doc/html/rfc7946)__-формате
- [![Redis](https://img.shields.io/badge/Redis-DC382D?style=flat&logo=redis&logoColor=white)](https://redis.io)
  для кеширования повторяющихся запросов и увеличения производительности

#### В данный момент [сервер](http://194.87.111.159/) расположен по адресу `http://194.87.111.159/`

#### Все [_API_-эндпоинты](http://194.87.111.159/api/) начинаются с `http://194.87.111.159/api/`

---

- ### frontend

Здесь находится исходный код _веб_-клиента для _http_-сервера. Написан на
[![React](https://img.shields.io/badge/React-20232A?style=flat&logo=react&logoColor=61DAFB)](https://reactjs.org)
с использованием
[![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=flat&logo=tailwind-css&logoColor=white)](https://tailwindcss.com)

#### В данный момент [развернутый _frontend_](http://194.87.111.159/) расположен по адресу `http://194.87.111.159/`

---

- ### beacons

Здесь находится _скетч_ для _BLE_-маячков, которые мы используем для навигации. Код расчитан для запуска на ESP32.
